<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://fenrirD.github.io/en/blog</id>
    <title>Fenrir  Blog</title>
    <updated>2023-09-18T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://fenrirD.github.io/en/blog"/>
    <subtitle>Fenrir  Blog</subtitle>
    <icon>https://fenrirD.github.io/en/img/icon/icons8-animal-microdots-premium-96.png</icon>
    <entry>
        <title type="html"><![CDATA[젠킨스 빌드 리팩토링]]></title>
        <id>jenkins-build-refactoring</id>
        <link href="https://fenrirD.github.io/en/blog/jenkins-build-refactoring"/>
        <updated>2023-09-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[도입]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="도입">도입<a class="hash-link" href="#도입" title="Direct link to heading">​</a></h2><hr><p>이직 후 점점 적응을 하고, 개발을 하면서 현 회사의 환경에 익숙해 지는 과정에서 새로운 개발 환경을 구성하는 업무를
담당하게 되었고, 업무를 수행하는 과정에서 눈에 거슬리는게 있었다.</p><p><img loading="lazy" alt="build img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOsAAABpCAIAAABUEENRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAnqSURBVHhe7Z3djhxHFcf9AIY7LrjIBVeYcGUhATL4S9oQy5GzkM1i5YJFAQXY3SGJlGQjK8rMOthZcLIOzowtm6tIluchOm+VFwin6nTXnPl3zYfHdaa2t87qJ6u7pqrPqarf9NR+lPvMby9fLZbvvzuzBiCokRYzWB0IaqTFDFYHghppMYPVgaBGWsxgdSCokZY843s0/N9CoIkGoJoSENRIS2aDPzt+ePjF1+FUAk0uXOoNx4dbl65A+Rxck2q0O93kwqWb/fG4v+0KQTUlZPQ1IDsYJTos3SWnwf+6//D663949bUb/X9/FcQNQJPlDb6wffisclN4kg0OSUL5i2MGr4Og6V/23qXTjWvXP7n7ZShkZH1ieYMDJ9lgPczgdSBN/cf7H128cvXqK9c+vn0ky6EJG7w7GH/rv54NbrpCupM1WoeJaR/UNauKGlajwywGe7F8Au0kW/0ConW47/1RVV8w1sHA7si/5MeKQ/ebqw33u61yboO/frLzzi6V/O76jU+P7k/KowZXVT157thN0pIGh/qu2j7N+boNZn2Def19yA37RceSaB1Wlv2TDWUHGVcy6rmD7d5uvbiaJPPMpxEqd46cBn/+4Mlbf/4rndJqeHAPv5+T9Qk/7pOx3hqMafKWNbiZQl8twypC5tmkgUlyOfWL3ZJE60j5ZnWwLhGvulNxtYVLjpNPToPvfPXo99tv3Xhj+7Pjh0HcADRx4y4kmMzicgYHLcKcUVtQTQn3Tpt2yKchkoz2yy8J+FN+Zp3Q91gH+ZShJnQprhNC+2MzeCWCpncfPL7z30fhVAJN5LgTtLBb9R5MhfWcgWpKuKCU5xyDW/0K1ZhoHTA42kGgbiiuZgavCMgaBZr4ccfVm5wtus1EvkmKV1u7wU6UZs06Zx3c9IuOJdE6UwbP6CCzNTjka9Y37yY0lZjB68ONu//Wmz4N5QzR7cd/2NJH5GFM3GaqJtV6Yc5ANSXqPF0y+AOBOslYvyTROtJgd9rqoHfdH8wI7a9sBncZUE0JCAqwnUHEKMvUKRYzWB0ICpjBL4gZrA4EBczgF8QMVgeCGmk584OfXSoWUE0JCGqkxQxWB4IaaTGD1YGgRlrMYHUgqJEWM1gdCGqkJc/49u8/WQg00QBUUwKCGmnJbPDB0ejDuw/CqQSanD23d/R0cP7cRSifg2tSDTenm5w992bv6bi34QpBNSVkdEImsDLRrpVJToM//s/oJ795/aVfvfb+7ftB3AA0Wd7gsxuDbyqniBlcApnvwa/+qUenP/7Ftf3+F6GQkfWJ5Q0OmMElkNlgYvOdD3/48uUfnX/lb7c+l+XQhA3ePKh3d31z8KYrpNtto3WY1PZBXZP/Put4kMXgaAKicI9ON4+ro51aStk1hl51NX0hd63XjEZoVSC5DT5+cuXm36nkpV9ef+/28aQ8anBV1eK6YyfBkgaH+q7azrBqjkE1JWTCMgFZyO66l7zKxPmDsfQyvHR2Y2+zbtuMhnsb1G/UAslp8KfHj3+9+Tad0mr4gzv4/ZysTwQd+ZQneFmDhRlZVhHRBKYKd4ako8ic6kw6yxVCZXcqRiPJsqS75DT41r1HP9+4+dMrWwdHoyBuAJq4OROfqmSwm/KlDebbla/WCLQxANWU4JtrOwHqAq8B+IsFrW/G1C/hK8P16/uuGdyQeRXxyZePb917GE4l0ETOGTGZ6ee+B1NhPd+gmhIuaCwBqXWAa8ISQlJ3vOkalZjBWLQGQNYo0MTPGa78pI4069Usg7Ha2g2OJRB64SrsDPhVV/PpkODywPmDAZdQcxqE0DUqMYOx6GTip3bQ4+/HGxtc+c7QfwjTx+sgJm5QJFTbC/MNqinRynOSQCiUa1y6y06WHM5yr7vrC/4swgwmOmOwBqCaEhDUSIsZrA4ENdJiBqsDQY20mMHqQFAjLbbTUx0IaqTFDFYHghppMYPVgaBGWsxgdSCokRYzWB0IaqQlz/jCf7QaBZpoAKopAUGNtGQ2uMDnyZ20//A0OkodIqfBZT5PzgxOS+Z7cIHPkzOD05LZYKKU58nFEhCF7ikY8iEasmsS8X+1uxEITXxnxWV9W3rVXbx1HVnOo9Tdx8vlNriU58lFEpCF9TNaxANdtvzjxvg44O7fA1chtKUm4c08HLvHZLhjXxiuxo+RowMGyv2lOvx4uZwGF/Q8uVgCU4Xs3CRzqjPpbJTdkb9IMwJbg1F/uzf0F6xfEteXQLkc2JO2wlmGnAYX9Ty5dgLUBf7g5i+2qr4ZU7/8qTvwywz64lsyXYpPmxs5u97+11XmECF0QJabwasQNC3leXKxBKTWAa7JnzDwEiGvwzdaf0BDIe6++/jsOh4rWcLUY9iMEpWYwcsCskaBJn6gu/s8uUgCoReuwv4hv+pqjkcElwPUVoxAfUH3TpAr4HFtPzxGjg6YU/Z4uTwGr4Cf2i4/Ty6WQCgMd1aCbo1SOInvUf1jhH5zD/aFzbE0W1Smj6nwEpbLUTKDuwWopgQENdJiBqsDQY20mMHqQFAjLWawOhDUSIsZrA4ENdJiBqsDQY20mMHqQFAjLWawOhDUSIsZrA4ENdKSZ3zhF8hRoIkGoJoSENRIS2aDC9wnt5CFv9qN9qtYchpc5j65hZjBz0Xme3CB++QWYgY/F5kNJkrYJzcn+f6oqv8oNJZhYPcU7WxLS26DC9onF0u+qv/2fFaGjCvxf355Ona2pSWnwQXtk2slT/5J+WZlWJeIV92puNrCJcepJ6fBBe2TW5h8LEM+ZagJLRi4TuiXPzaDW0VrIGhayj65hcnPyBA4HTvb0pLZ4DlAEz9tnd4n10oe336RDJlTtrMtLXkMXgE3bZ3dJxdNXhoczdC77g9cR/BnEWYw0xmDNQDVlKBAbHCQ1UiIGawOBTKD9TCD1aFAZrAeZrA6ENRIixmsDgQ10mIGqwNBjbSYwepAUCMtZrA6ENRIixmsDgQ10pJnfOEXyFGgiQagmhIQ1EhLZoNtn9xzEe1R4eQ0uNh9civ/MYMZ3CbzPbjMfXJmcEIyG0wU8jy5sNHtjYt/7I/dMZ9S8tHcArZDbj65DS5kn1zzB+zNRrfJPXhWbkyrIVW2HXJT5DS4zOfJQQ6zcqtLsOFkEFZeipwychpczj45Tpg+95vPkCmD27nxKTPd0AxGMq8iCtknF2g2uk0ZHM0NsB1ys8hs8BygiZ+8ru6Taz/ajY2kg1m5MbZDbiF5DF4BN3md3icnNrqFfOqfMNgOuRegMwZrAKopAUHnIAU1lsQMVgeCzsGtIsRPHoxlMIPVgaBAWCeEpQJUMOZjBqsDQY20mMHqQFAjLWawOhDUSIsZrA4ENdKSf3zf3v0n/Tv/1xmGMYvMBpO+7KvUl0sMYzGXr/4fkKmAr6F7ZEcAAAAASUVORK5CYII=" width="235" height="105" class="img_ev3q"></p><p><img loading="lazy" alt="jenkins img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAAA9CAIAAAA/GiJ6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAkDSURBVHhe7Z3RS+PKHsfve/+Lvvq2jz720cd989HXUpAiyLogS2E5WC7CekCkIJcSCbanS6FcscFL2XCU0mLBULbYxUND6S6WsmXTI1hdlN6Z3yQxySSlerfO9u7vw/dhk0ym42+/zkzq/DL/GP2N+pmE+MGFCSVWflR2pVC0WDGPfkW4MKHEyo8fZtNBY2tDjiqX5uHswIUJJVZ+/DCbdo8Xo9LiIdoU9T/K5Kp5ePBymbhTerldzaYcNr2+yG5nXsSkUEwml/T70ej8aD4qxT/02XV2mKhem4c2WpHUZimX7ZJT8ClxeubF+oHy5Y6c6h7m6NXT6tpren7h96r+/bOynZmLSuF4LvXxCuqqJ0klu2d6CRoZk5f26gZpydTgwoQSK8D4kA8Tg6ZrzV67ki9EqLHApvefs79JodUDpdPvnqtLMSkiN0ejdnpdCm1WDbhXk+XQypHGm+b7lfFJpb3p+wtjYAzv7/TDXDgqJ07aRq+ZptXSu8Cm0txGqdJpV/ZJASmymkuUWvr5cXxFCq2rOq0LbLoix/fPmp2WCsWm2klzYUKJFeWyQExjGoJwrW5bNq0XibG2PtJuj0AdGStqo5Gez4SiBfWGnGturUjze8S7frgG/UYy5igJfXCyzmxqfcRNbY3Ycbs2hCJa2moGs+lGmf1ijEatNOl6fyvTDno6cGFCCVUocdwFA4V26+Z/kWNuyro6t8A338rRqLRWvga3ZdIdepezcJJ4mZ5y2BT+bRewi5mDvuk4NribLYFLDps+tPAym5Cg5dPCGyaUWBlXZE75OfvG+b/eL2wQDzl603rfGNhik0VaJrxzViH9q93J3Rh2seF3OMP1phG5YZdhxR5hU6uXHd3TLtyedUwDb5hQggXAIC4tmTO/QoSYgPnjppFclcJvikrr0hhcNk9KW3+aM8JhuRCK5RbfSNGS9SzF0ysvRaX57XLzvK71rrU0mTNkkiet7qDfbdVS6Rox5yNsGsusHTa7vZaSzpC5qc9D24+DCxNKrBj3vcpejj7OLxMrXCjOL6S+1rc2ZPLcTXz8Yr2QPrfMcXOWoI//BzBDDeJK28/Re5fzSo99Sj4C3yeE45l4oUl6x0fYNFVWd+k3ALSRpTYUmRZcmFBiNRu47PsMcGFCidVsgDb9xTUboE1/cSF+cGFCiRXiBxcmlFghfmBckBkAbYrMAGhTZAbg5kYogUIC4CKFEigkAC5SKIFCAuAihRKocbQLm7nI3lP+8KP/p7C4emSuXJlNuEihBGocT//75P9B/jQXKZRA2QwaKWu1XmSnZrhX2sNS/OCcPhewrt6+l7r8zjg9iq7Sw7nVvDsFr6bts9WDNDVv+LG0BNl8ZmKgvcbvUyP1Vg6T218fZP9it08dLlIogTLpK5tSaKWgdPpG5yyZKnfvr41BLUGcRCwLa+wDc/q83A2v+soOuXqgDPrG9e1QK5LCS++b3UFb2ZFDsbzyjRQDm8YyNDWvVU0QE6/IC5C1p+7SBdpsyTPYVJ5/c5A9b+vnx1CsWBm3vPWHwUUKJVAmtk2hr7pnCXrOQT84p88Px6APN9pZKINqnFiWvl0CKrfO6++JNTPpFhzAgn+Wl8JsaicM0nwByPJ7BrhIocSJjsssBeprfQsGVpoaX2fmcdo0MKfPLMZkZVP5X7UEFnRW7rOA32FT+7yZ+G8mA04Zb6RQAkXz5mjKnsU3SJ8380acTgrO6RvdDu0UPKsqb2+6We7aZYhuSO84uU2tXnY0Mkp52rmem4dTxRsplEiZXBb2yLyQeKitbJPpI7Mp9KCJo0rrrPKXJ6cvP0cumUb0AfLrc1taS9Uuugp9hUQ839CJQTuNbEqF3nBym0pziaLa6euaGidz04eJx3ThIoUSKJO++i94/Q68M8d6mr7TPxQWyMkYmR365fTBeyX8+VJdewW10VekPLyQJ7QsR3fPwI2T2zSXOlGj7H0+b0vawJynThsuUiiBehr3F6kpv3SE4bbvs8JFCiVQk1MvreVrWqffbZ2l38mkb1srT/0rTLQpCjQ57ePoK/pVAB18X+W3qnRQnjZoUxQICYCLFEqgkAAwNMgMgDZFZgC0KTIDoE2RGQBtiswA3MMmSqCQALhIoQRqHHe6UljYUJvT3NfGYurv0n8sXKRQAjUOeAf5alF7jtXy42369OTBJ8NFCiVQPwvjbepaTvU8cJFCCdQDd8an47V1+Kt9TF47obs+PKxuZhuS/PvCyrCja/nMTUW8MEv5bIcHtR1kYXEgXadnrwwkZfbLqSCb+iQP+uUAmi2sm9vzvSooX271D1Yb9ulL/gnsJ1I7Zbaj34u3R5Wv/isDuUihBMpiWKeJdZF3qtq61DU1dUJXlnhsOr+SSRw29U4zuyOHonJS891IBGzqtx0e1CZFdplr7+hOaGy5tLUzib9NueRB/xxAaGF4OZ/S2rpWWiLuX5UXd6pN0tpN8kHmzlXQBjnyrqS22s1TKBbQhXORQgmUCaTsvS55npa8NrU3yIO98MLphnnoAmzqtx0e1JZXBuw8TQ0I75xZXTIUm2jQD8gBdLWQZRSyTQDJ3UXyO8AyqFgbCjS1lQKpgrlCzzx0wkUKJU50JKXm8GbkMTw2ZZ0i8OAbKMPEVtw5LUV4mHQ+1EZwpI8CjrkpfJZZp1mPs074t1u0HncLXZ8Flxw2tc6TK8ELBb2RQgmUlWfnyW828dh04b2VOwc7Qc7TBBLSc9m5eMaQdsZgI7/t8FwWua+TcTxsu5kVYzalo7xV5/UtXHbaNCAH8BE2tXpZMvHYI/MBu4N34Y0USqQs2NsiFn4fNzcNL+eS1bbRacDqfXO2xwGW8tsOz2UdMi7TV07I1mQ3M2/b1AdX8qB/DuAjbEp+zGOtd9k8Kb50TTxccJFCCdQDt/qfRfb4HI5nkqd+T/p/1NL/9OTy84BN/bbDc9uUGJVu00+fyuO5rdPG2C+k3MmDvjmAj7DpQaFctN4yVNbZ3qocXKRQAjUhbhOMxTlA/3R4f1WC4SKFEqgJQZuiRGpC0KYokUIC4CKFEigkAC5SKIFCAuAihRIoJAAuUiiBQnwZjf4LVGFoyoGzSCgAAAAASUVORK5CYII=" width="226" height="61" class="img_ev3q"></p><p>바로 서버 별로있는 Jenkins Job들과 Source안에 SH 파일(shell script)가 있다는 것이였다.</p><p>전 회사에서 심심할 때 CI/CD를 개선하는 작업을 했던 나에게 뭔가 결심을 하게 만들었다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="본론">본론<a class="hash-link" href="#본론" title="Direct link to heading">​</a></h2><p>새로운 개발 환경 서버를 추가하는 업무를 하는 과정에서 서버를 구성하고 CI/CD를 설정하기 위해서는 먼저 기존의 CI/CD 프로세스를 분석해야 했다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="기존-cicd-방식">기존 CI/CD 방식<a class="hash-link" href="#기존-cicd-방식" title="Direct link to heading">​</a></h3><p>기존의 빌드 방식을 간단하게 글로 작성하면 개발자가 Gitlab에 push를 하면 <code>webhook</code>을 통해 <code>jenkins</code>에서 빌드하고 k8s에
배포하는 방식으로 CI/CD가 구성되어 있었다.</p><p><img loading="lazy" alt="img1" src="/en/assets/images/jenkins_img1-69350262e1b161ea7ffe33c2a2171f4c.png" width="1796" height="738" class="img_ev3q"></p><p>간단하게 기존 CI/CD 프로세스를 이미지화 하면 위와 같다.</p><p>서버를 추가하기 위해 거의 동일한 내용의 <code>shell scriprt</code>, <code>webhook</code>, <code>jenkins job</code> 등을 추가 해야 했다.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><ul><li>STG 서버를 추가하면서 내가 작업 했던 업무 리스트<ol><li><code>STG Pod</code> 배포</li><li>빌드를 위한 <code>Shell Script</code> 작성</li><li><code>Webhook</code> 추가</li><li><code>Jenkins Job</code> 추가</li></ol></li></ul></div></div><p><code>STG</code> 서버 추가 작업을 할 때는 일단 기존의 방식대로 작업을 했다.</p><p>그러나 평소 <code>DevOps</code>에 관심이 있던 나는 이게 최선일까? 라는 생각을 하게 되었고
시간이 남을 때, 조금씩 CI/CD 프로세스를 수정을 하고자 했다.</p><p>먼저 개선에 앞서 기존 방식의 문제점을 생각했다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기존-cicd-문제점">기존 CI/CD 문제점<a class="hash-link" href="#기존-cicd-문제점" title="Direct link to heading">​</a></h4><p>내가 생각한 기존 CI/CD의 문제점은 다음과 같다.</p><ol><li>서버 환경이 N개로 늘어나면 N개의 <code>sh file</code>, <code>jenkins job</code>이 필요하다.</li><li><code>sh file</code>이 FE Source와 함께 관리 된다.</li><li>Jenkins 에서는 <code>sh</code>를 실행 시켜주는 역할만 한다.</li><li>어느 과정에서 실패 했는지 파악하기 어렵다.</li></ol><p>이러한 문제점을 해결 하기위해 내가 생각한 방향성은 다음과 같다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="개선하고자-하는-방향">개선하고자 하는 방향<a class="hash-link" href="#개선하고자-하는-방향" title="Direct link to heading">​</a></h4><ol><li><code>shell scirpt</code>을 <code>FE source</code>에서 제거하고, 별도의 Repository에서 관리한다.  </li><li><code>Jenkins Job</code>을 하나로 여러 환경으로 빌드 및 배포를 진행한다.</li><li>어느 과정에서 실패 했는지 추적이 쉽게한다.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="새로운-cicd-방식">새로운 CI/CD 방식<a class="hash-link" href="#새로운-cicd-방식" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="img2" src="/en/assets/images/jenkins_img2-0857efce2662f62ea484d67f9bab6efe.png" width="1796" height="738" class="img_ev3q"></p><blockquote><p>새롭게 개선하고자 하는 CI/CD 프로세스 이미지</p></blockquote><p>위 이미지 처럼 여러개의 브랜치에서 Webhook을 통해 이벤트가 발생하면 하나의 jenkins Job에서 빌드를 하고,
그리고 배포하고자 하는 서버로 자동으로 배포가 되게 수정을 하고자 했다.</p><p>그러기 위해서는 여러가지 수정을 해야 했는데 먼저 빌드 파일이 FE source와 함께 관리되고, <strong>Jenkins</strong>에서는 단순히 <code>shell sciprt</code>만 실행 시켜주는 빌드 방식을 변경하고자 했고,
그 결과 <strong>groovy script</strong>를 작성했다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-groovy-script-작성">1. Groovy script 작성<a class="hash-link" href="#1-groovy-script-작성" title="Direct link to heading">​</a></h4><p>나는 Groovy 문법을 잘 모르지만 최대한 <strong>document</strong>를 참고하면서 작성을 했다.
먼저 기존에는 브랜치(배포하려는 서버)와 <code>Jenkins Job</code>의 관계가 1:1 여서 새로운 환경이 추가 될 때마다
롭게 추가해줘야하는 방식이였다면 N(배포하려는 서버) : 1(Jenkins Job) 관계를 갖게 하려고 작업을 했다.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package cip</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipeline {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  agent any</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tools {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nodejs 'NodeJs-14.13.1'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stages {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage('Initial VARIABLES') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        script {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          CHOISE_BUILD_TARGET="${params.BUILD_TARGET}"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          BUILD_TARGET='""'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          BRANCH_NAME=env.gitlabBranch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          echo "BRANCH_NAME1: ${BRANCH_NAME} "</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          REPO_URL='[GIT_FE_SOURCE_REPOSITORY_URL]'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          // 수동으로 배포 했을 때, 브랜치와 빌드 타겟을 정해주기 위한 조건문</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          if(CHOISE_BUILD_TARGET) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(CHOISE_BUILD_TARGET=='dev'){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              BRANCH_NAME="develop"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else if(CHOISE_BUILD_TARGET =='stg'){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              BRANCH_NAME="stage"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              BUILD_TARGET="-stg"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            } else if(CHOISE_BUILD_TARGET =='prd') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              BRANCH_NAME="master"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          if(BRANCH_NAME == 'stage') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            BUILD_TARGET= '-stg'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          } else if(BRANCH_NAME == 'master'){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            BUILD_TARGET= '-prd'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          ADMIN_POD=[DEPLOY_ADMIN_POD_NAME]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          CLIENT_POD=[DEPLOY_CLIENT_POD_NAME]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          DIRECTORY='./dist/js'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          sh "echo '${BUILD_TARGET}'"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          echo "Build Target: ${BUILD_TARGET}"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          echo "BRANCH_NAME: ${BRANCH_NAME} "</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage("Branch Checkout") {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        checkout([$class: 'GitSCM', branches: [[name: BRANCH_NAME]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: CREDENTIALS_ID, url: REPO_URL]]])</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage("Npm install") {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh 'npm install'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage('Npm Run Build  for Develop') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      when {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        expression {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          return BRANCH_NAME=='develop'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh 'npm run build_dev'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage('Npm Run Build  for Stage') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      when {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        expression {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          return BRANCH_NAME=='stage'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh 'npm run build_stg'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage('Npm Run Build  for CIP-Product') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      when {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        expression {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          return BRANCH_NAME=='master'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh 'npm run build_cip_prd'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stage('K8S Apply') {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      steps {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo '===========================\n'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo 'Build cp ADMIN'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo '===========================\n'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh "kubectl exec ${ADMIN_POD} -n [TARGET_POD_NAMESPACE] --kubeconfig=[KUBE_CONFIG_PATH] --context=[CONTEXT] -- sh -c 'rm -rf /usr/share/nginx/html/admin/dist'"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh "kubectl cp ${WORKSPACE}/dist  saas/${ADMIN_POD}:/usr/share/nginx/html/admin --kubeconfig=[KUBE_CONFIG_PATH] --context=[CONTEXT]"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo '===========================\n'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo 'Build cp Client'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo '===========================\n'</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh "kubectl exec ${CLIENT_POD} -n TARGET_POD_NAMESPACE] --kubeconfig=[KUBE_CONFIG_PATH] --context=[CONTEXT] -- sh -c 'rm -rf /usr/share/nginx/html/client/dist'"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sh "kubectl cp ${WORKSPACE}/dist  saas/${CLIENT_POD}:/usr/share/nginx/html/client --kubeconfig=[KUBE_CONFIG_PATH] --context=[CONTEXT]"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>해당 스크립트에 대한 자세한 설명은 생략한다. </p></blockquote><p><strong>Jenkins Multibranch Pipeline</strong> 를 활용을 했다면 브랜치 관련해서 문법이 더 간단 했겠지만 버전 문제로 사용하지 못 했다.
또한 팀원들의 요청으로 수동 배포 방식도 가능하게 작성했다.</p><p>그리고 <code>groovy script</code>는 별도의 Repository에서 관리를 하는 방식으로 변경했다.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Groovy 문법 관련해서는 공식 도큐먼트를 참고하자.<br>
<a href="https://www.jenkins.io/doc/pipeline/steps/workflow-cps/#pipeline-groovy" target="_blank" rel="noopener noreferrer">Jenkins Pipeline groovy</a></p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-jenkins-구성-변경">2. Jenkins 구성 변경<a class="hash-link" href="#2-jenkins-구성-변경" title="Direct link to heading">​</a></h4><p>기존에는 Jenkins에서 sh 파일을 실행 시키는 방식으로만 사용 했지만 새롭게 개선한 방향으로는
별도의 Repository에서 groovy script를 읽고 빌드 및 배포를 진행하고자 해서 jenkins job의 구성을 변경했다.</p><p><img loading="lazy" alt="img3" src="/en/assets/images/jenkins_job_img1-da86f77f5609b26b3375684523a3da49.png" width="819" height="393" class="img_ev3q"></p><blockquote><p>기존에는 Jenkins 구성은 단지 checkout 받은 소스에서 sh 파일을 실행시켜주는 역할만 했다.</p></blockquote><p><img loading="lazy" alt="img4" src="/en/assets/images/jenkins_job_img2-cb0e99bf009f95db7ace6dc9d6e09413.png" width="717" height="393" class="img_ev3q"></p><blockquote><p>빌드 파일 스크립트를 별도의 Repository에서 관리, 파이프라인 방식으로 변경</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-cicd-과정-한눈에-보기">3. CI/CD 과정 한눈에 보기<a class="hash-link" href="#3-cicd-과정-한눈에-보기" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img5" src="/en/assets/images/jenkins_log_img-033c6bb3f074f9de806e4b8745b7ecd7.png" width="1196" height="596" class="img_ev3q"></p><p>파이프라인을 이용하고, groovy script에서 stage 기준으로 단계를 정의 했기 때문에 위 이미지 처럼 어느 단계에서 실패 했는지
보다 확인하기 쉽게 개선을 했다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-팀원들의-요구사항-수동-배포-설정">4. 팀원들의 요구사항 수동 배포 설정<a class="hash-link" href="#4-팀원들의-요구사항-수동-배포-설정" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="img6" src="data:image/png;base64,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" width="364" height="178" class="img_ev3q"></p><p>그리고 팀원들의 요구 사항인 webhook을 통한 배포 외에도 직접 배포할 서버를 선택해서 수동으로 배포할 수 있는 방법으로는
jenkins의 Choice Parameter를 활용해서 적용했다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><p>음.. 2 ~ 3일이 소요되는 작업이였고, 그 과정에서 Jenkins version 문제와 groovy 문법을 정확히 몰라서 많은 트러블이 있었고,
해결해나가는 과정에서 조금 성장했다고 생각한다.</p><p>또한, 내가 한 방법이 정답이라고는 생각하지 않는다. 분명 내가 한 방법은 비 효율적일수도 있다.
하지만 어떻게 하면 내가 더 개발에 집중하고, 더 나아가 같이 일하는 동료들이 개발에 더 집중할수 있는 시간이 조금이라고 향상되었다면
그걸로 만족한다.</p><p>그리고 코드리뷰 시간에 이러한 내용을 정리해서 리뷰를 하였고, 팀원들은 긍정적인 반응을 보여줬다.</p><p>또한 이 글을 읽는 독자가 조금이라도 DevOps 쪽에 흥미를 갖고, 기존 시스템을 개선하는 계기가 되었으면 한다.</p><p>기회가 된다면 다양한 개선 방법에 대해 공부하고 적용해보고 싶다.</p>]]></content>
        <author>
            <name>Fenrir</name>
            <uri>https://github.com/FenrirD</uri>
        </author>
        <category label="jenkins" term="jenkins"/>
        <category label="groovy" term="groovy"/>
        <category label="CI/CD" term="CI/CD"/>
        <category label="k8s" term="k8s"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[js 호이스팅]]></title>
        <id>js-hoisting</id>
        <link href="https://fenrirD.github.io/en/blog/js-hoisting"/>
        <updated>2023-03-16T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="도입">도입<a class="hash-link" href="#도입" title="Direct link to heading">​</a></h2><hr><p><img loading="lazy" alt="Example banner" src="data:image/jpeg;base64,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" width="275" height="183" class="img_ev3q"></p><p>JS에서 사용되는 개념인 <strong>Hoisting</strong> 에 대해서 정리를 하고자 한다.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>둘리의 호잇 아닙니다.</p></div></div><hr><p><strong>MDN</strong>에서 아주 친절하게 누군가 물어보면  <strong>"변수의 선언과 초기화를 분리한 후, 선언만 코드의 최상단으로 옮기는 것"</strong> 이렇게 설명 하라고 작성되어 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="본론">본론<a class="hash-link" href="#본론" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="호이스팅">호이스팅<a class="hash-link" href="#호이스팅" title="Direct link to heading">​</a></h3><p><strong>MDN</strong>에서 설명 해준 내용을 읽고, 아래의 코드의 실행 결과를 예상해보자.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"hello"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">printAge</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">17</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Lee"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">printAge</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">age</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'age:'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드는 아래와 같이 출력한다. </p><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><p>hello Lee<br>
<!-- -->age: 17</p></div></div><p>위에 작성한 코드는 <strong>Reference Error</strong> 가 아닌 <code>name</code> 과 <code>printAge</code> 함수가 정상적으로 수행된다.
왜? 그게 바로 호이스팅이다.</p><p>javascript 에서 <strong>var</strong>로 선언한 변수와 함수의 선언식에서는 인터프리터가 변수와 함수의 메모리 공간을 선언전에 미리 할당하는데
이러한 작업을 호이스팅이라고 한다.</p><p>더욱 쉽게 설명하면 <strong>호이스팅</strong>은 JavaScript에서 변수 및 함수 선언이 해당 스코프의 최상단으로 옮겨지는 것을 의미합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="호이스팅-종류">호이스팅 종류<a class="hash-link" href="#호이스팅-종류" title="Direct link to heading">​</a></h3><p>호이스팅 종류에는 두 가지 요소가 있다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="변수-호이스팅">변수 호이스팅<a class="hash-link" href="#변수-호이스팅" title="Direct link to heading">​</a></h4><p>변수 선언은 해당 스코프의 최상단으로 옮겨지지만, 초기화(할당)는 그 자리에 남아 있다.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"hello"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// undefined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Lee"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드는 Javascript 엔진에 의해 실제로 다음과 같이 실행 된다.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"hello"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// undefined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Lee"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="함수-호이스팅">함수 호이스팅<a class="hash-link" href="#함수-호이스팅" title="Direct link to heading">​</a></h4><p>함수 선언은 해당 스코프의 최상단으로 옮겨지며, 이때 함수의 전체 정의가 옮겨 진다.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">printFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// "Hello!"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">printFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Hello!"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드는 Javascript 엔진에 의해 실제로 다음과 같이 실행 된다.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">printFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Hello!"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">printFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// "Hello!"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="주의사항">주의사항<a class="hash-link" href="#주의사항" title="Direct link to heading">​</a></h4><ul><li><p>변수 호이스팅 시, 선언만 옮겨지고 초기화는 그 자리에 남아 있으므로 변수를 사용하기 전에 선언되었는지 주의해야 한다.</p></li><li><p>함수 호이스팅은 함수 전체가 옮겨지기 때문에 함수 선언식을 사용하더라도 해당 함수를 호출할 수 있다.</p></li><li><p>함수 표현식(anonymous function expression)의 경우 호이스팅이 되지 않는다.</p></li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">printFunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// Error: printFunc is not a function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">printFunc</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Hello!"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드에서는 변수 printFunc은 호이스팅되지만, 해당 변수의 초기화 값이 함수가 아니기 때문에 오류가 발생한다.</p><p>호이스팅은 코드의 가독성과 유지보수성을 떨어뜨릴 수 있으므로, 변수와 함수를 선언한 위치에 최대한 가깝게 작성하는 것이 좋다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><p>호이스팅은 의도치 않게 실수를 일으킬 가능성이 있으니 항상 주의해서 코드를 작성하자.</p>]]></content>
        <author>
            <name>Fenrir</name>
            <uri>https://github.com/FenrirD</uri>
        </author>
        <category label="javascript" term="javascript"/>
        <category label="hoisting" term="hoisting"/>
        <category label="var" term="var"/>
        <category label="let" term="let"/>
        <category label="const" term="const"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[js 비동기 프로그래밍]]></title>
        <id>js-asynchronous</id>
        <link href="https://fenrirD.github.io/en/blog/js-asynchronous"/>
        <updated>2022-12-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[도입]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="도입">도입<a class="hash-link" href="#도입" title="Direct link to heading">​</a></h2><hr><p>Q. js에서 비동기 대해 설명해주세요</p><p>A. 네? 비동기요? 비동기가 어떻게 이루어지는 지를 말씀히시는건가요?</p><p>Q. 네 뭐든요.</p><p>A. 이벤트 루프 어쩌구 저쩌구 프로미스 어저꾸 저쩌구 async, await 주저리주저리..</p><p>Q. Ajax 아시죠?</p><p>A. 네. Ajax는 비동기 통신을 위한 저는 JQuery 어저꾸 저쩌구 (뇌는 하얗게 변함 🤯)</p><p>Q. 콜백 지옥이라고 들어보셨죠?</p><p>A. 네. 콜백은 호출하는 함수를 파라미터로 전달에서 어떠한 동작이 끝나고 호출</p><p>Q. 개발하시면서 콜백 지옥을 경험해본적은?</p><p>A. (이미 뇌는 멈췄다) 어... 그러니까...</p><p>Q. ...</p><p>A. ...</p><hr><p>대략 이런 대화였다. 지금 와서 생각해보면 JS 특징과 JS가 어떻게 비동기 처리를 하는지 알고 있는지를 물어보려고 하신 거 같다.
아마 실제 답을 할 때는 나 스스로 정리도 안 되고 내 머릿속에서 떠다니는 단편적인 지식을 조합해서 대답했다.</p><p>지금 생각하면 어떤 기능을 개발하기에만 급급하고 그 기능을 구현할 때 사용하는 기본적인 지식 습득에는 관심이 없어서 대답을 저렇게 한 거 같다.
항상 어떤 개발을 할 때, 왜 사용하는지를 알고 해결하고 끝이 아닌 정리를 하지 않으면 기술 면접에서는 영원히 불합격할 거 같다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="본론">본론<a class="hash-link" href="#본론" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="javascript-특징이-뭐에요">Javascript 특징이 뭐에요?<a class="hash-link" href="#javascript-특징이-뭐에요" title="Direct link to heading">​</a></h3><p>에? JS에 특징이요? 어... 그러니까 JS는 <em>인터프리터 언어</em>이고 <em>싱글 스레드</em> 뭐 블라블라 라고 대답하겠다.
JS 비동기 프로그래밍에서 중요한 건 <em>싱글 스레드</em>이다. JS가 싱글 스레드라는 의미는 작업이 시작되면 이 작업이 완료되기까지 다른 작업을 할 수 없다.</p><p>왜곡된 설명을 하자면 한 식당이 있다. 이 식당의 기본적인 프로세스는 주문 -&gt; 요리 -&gt; 서빙 순으로 진행된다. 이 식당에 근로자가 1명이라면?
첫 번째 손님이 오면 근로자는 위에 프로세스대로 일한다. 서빙을 마치고 두 번째 손님이 왔다면 다시 위 프로세스를 진행한다.
만약 요리하는 와중에 세 번째 손님이 오면 이 손님은 주문을 하려 해도 근로자가 서빙까지 마치고 나서야 주문을 할 수 있다는 것이다.</p><p>즉 JS는 한번에 하나의 일밖에 처리 못하는 <code>single Thread</code>다  </p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Thread: 스레드는 어떠한 프로그램이 실행되는 작업을 말함</p></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sleep</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> loopTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain"> loopTime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">cook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ms </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">floor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">random</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">10000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">serve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">serve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">o</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"메뉴: "</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"조리시간: "</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ms</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"초"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'피자'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'치킨'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'물'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs">피자<p>치킨<br>
<!-- -->물</p></div></div><p>위에 예시를 실행하면 항상 조리시간(ms) 상관없이 피자, 치킨, 물로 출력이 된다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="비동기-프로그래밍">비동기 프로그래밍<a class="hash-link" href="#비동기-프로그래밍" title="Direct link to heading">​</a></h3><p>비동기 프로그래밍이란 어떤 작업이 완료 될 때까지 기다리지 않고 다른 작업을 수행 하는것이다.<br>
<!-- -->엥? 근데 js는 싱글 스레드다. 어떻게할까? </p><p>javascript 엔진(V8)과  브라우저에 대해서 어느정도 이해가 필요하다.</p><p>[구조 사진 들어가는 곳]</p><ul><li><p>Stack</p><ul><li>스택은 우리가 잘 아는 자료구조의 하나인 스택과 비슷한 개념으로 함수를 호출하면 <code>stack</code>에 push 된다.</li></ul></li><li><p>Heap</p><ul><li>js에 객체 등 메모리 할당이 발생하는 곳</li></ul></li><li><p>Web API</p><ul><li>DOM, AJAX, 등 브라우저가 제공하는 API</li></ul></li><li><p>callback queue</p><ul><li>DOM, AJAX, 등의 이벤트가 끝난 후 <code>queue</code>에서 대기한다.</li></ul></li><li><p>Event Loop</p><ul><li>Event Loop는 <em>Stack</em>이 비어있으면 queue에 있는 함수를 Stack으로 전달한다.</li></ul></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>callback queue는 <strong>microtask queue</strong> 와 <strong>macrotask queue</strong>가 존재하고 우선 순위도 다르지만 자세한 설명은 생략한다. </p></div></div><p>위 구조를 이해하기 위해 간단한 예제인 아래 코드를 보면서 이해를 해보자.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="동기-진동기-부회장-아님">동기 (진동기 부회장 아님)<a class="hash-link" href="#동기-진동기-부회장-아님" title="Direct link to heading">​</a></h4><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:rgb(80, 250, 123)">SyncTest</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">foods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setFoods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> loopTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain"> loopTime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> foods </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">'피자'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'치킨'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'물'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    foods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ms </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">floor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">random</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">10000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'조리 시간:'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">serve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">serve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">food</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    time </span><span class="token operator">=</span><span class="token plain"> time </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setFoods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">old</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token spread operator">...</span><span class="token plain">old</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"서빙 : "</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">display</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'flex'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">flex</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'1'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">flexDirection</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'column'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">order</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">display</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'flex'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">flexDirection</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'column'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"> 주문</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">hr</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          foods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token parameter">food</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> time</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">"food_"</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">+</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> idx</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">음식:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text">, 시간: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text"> 초</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="display:flex;flex:1;flex-direction:column"><div style="display:flex;flex-direction:column"><button> 주문</button></div><hr><div></div><div></div></div></div></div><p>아까 본 코드를 실행해보면 조리 시간과 상관없이 피자, 치킨, 물이 출력되는데 위 코드의 실행순서를 그림으로 보면 아래와 같다.</p><p>[JS 구조와 실행순서 그림(동기)]</p><ol><li><code>onClick</code> Event 실행 되고, 큐에 할당되고, 스택이 비어있으므로 바로 스택에서 실행된다.   </li><li><code>order</code> 함수가 스택에 쌓이고, <code>cook</code> 함수를 호출한다.</li><li><code>cook</code> 함수가 스택에 쌓이고, <code>sleep</code> 함수를 호출한다.</li><li><code>sleep</code> 함수에서 인자로 받은 값 만큼 대기하고, <code>sleep</code> 함수가 스택에서 제거된다.</li><li><code>serve</code> 함수를 호출하고, <code>log</code> 출력 후, 스택에 쌓인 함수들이 순차적으로 제거된다.</li><li>위 과정을 <code>foods</code> 길이 만큼 반복한다.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="비동기">비동기<a class="hash-link" href="#비동기" title="Direct link to heading">​</a></h4><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:rgb(80, 250, 123)">AsyncTest</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">foods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setFoods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> foods </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">'피자'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'치킨'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'물'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    foods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cook</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ms </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">floor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">random</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">10000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'조리 시간:'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">serve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">serve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">food</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    time </span><span class="token operator">=</span><span class="token plain"> time </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setFoods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">old</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token spread operator">...</span><span class="token plain">old</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"서빙 : "</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">display</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'flex'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">flex</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'1'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">flexDirection</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'column'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">order</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">display</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'flex'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript literal-property property" style="color:rgb(255, 121, 198)">flexDirection</span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">:</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">'column'</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"> 주문</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">hr</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          foods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token parameter">food</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> time</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">"food_"</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">+</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> idx</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">음식:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">food</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text">, 시간: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text"> 초</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="display:flex;flex:1;flex-direction:column"><div style="display:flex;flex-direction:column"><button> 주문</button></div><hr><div></div></div></div></div><p>[Timeout을 실행 방법]</p><ol><li><code>onClick</code> Event 실행 되고, 큐에 할당되고, 스택이 비어있으므로 바로 스택에서 실행된다.</li><li><code>order</code> 함수가 스택에 쌓이고, <code>cook</code> 함수를 호출한다.</li><li><code>cook</code> 함수가 스택에 쌓이고, <code>serve</code>함수는 <code>setTimeout</code>에 의해 브라우저의 <code>WebAPI</code> 에서 <code>ms</code> 후에 실행 된다.</li><li><code>cook</code> 함수가 스텍에서 제거된다.</li><li>위 과정을 <code>foods</code> 길이 만큼 반복한후, <code>order</code> 함수도 스택에서 제거된다.</li><li><code>setTimeout</code>이 <code>ms</code> 값에 따라 실행된 순서대로, 큐에 쌓인다.</li><li>스택이 비어 있으면 이벤트 루프에 의해 스택에 쌓이고 <code>serve</code> 함수를 호출한다.</li><li><code>log</code> 출력 후, <code>serve</code>가 제거된다.</li><li>6~8번의 과정이 큐에 값이 없을 때 이벤트 루프에 의해 까지 반복 된다.</li></ol><hr><p>위에 두 코드의 가장 큰 차이점은 <code>sleep</code> 과 <code>setTimeout</code>을 통한 지연이다. <code>sleep</code>의 경우 스택에서 실행되어 지연되고 <code>setTimeout</code>은 브라우저의 WebAPI 통해 실행된다.</p><p>즉 JS에서 비동기 처리는 브라우저의 WebAPI 에서 실행되고, 실행이 끝난후 큐에 쌓이고, 이벤트 루프에 의해서 스택이 비어있으면 스택에 쌓인뒤 실행된다는 것을 알수있다.</p><blockquote><p>스택에 쌓인뒤 실행되는 함수를 콜백 함수라고 한다. </p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="콜백">콜백<a class="hash-link" href="#콜백" title="Direct link to heading">​</a></h3><p>콜백이란 특별한 의미가 아닌 당장 실행되지 않고 미래에 실행하는 단순한 의미이다. 비동기 프로그래밍은 언제 해당 함수의 처리가 완료 될지 모르므로
해당 함수가 종료 된 후, 그 다음 함수를 실행하기 위해 파라미터를 함수로 인자로 전달한뒤, 해당 로직이 끝난 후 실행하는것을 보장하기 위한 방법이다.</p><ul><li>callback을 사용하는 예시</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// forEach에서 사용하는 callback</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">n</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// setTimeout에서 사용하는 callback</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">callback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">func1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">num</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> callback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'func1'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  num </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">callback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">num</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">func1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token parameter">num</span><span class="token arrow operator">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">num</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>js에서 함수도 object이므로 파라미터로 전달하는게 가능하다 </p></blockquote><p>그리고 비동기 관련 질문에서 빼놓을수 없는게 콜백 지옥(👹)이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="콜백-지옥">콜백 지옥<a class="hash-link" href="#콜백-지옥" title="Direct link to heading">​</a></h4><p>콜백 지옥은 무수히 많은 콜백으로 인해 코드가 직관적이지 않고 가독성이 떨어지는 상황이다.</p><ul><li>이미지를 로드하고 그리는 상황에 예시</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">getImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8B8c7i0OCqgXJiV7al7cTXiaAjDWEHharTg&amp;usqp=CAU"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">img</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resizeImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">img</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드는 이미지를 불러오고 사이즈를 재조정하는 코드이다. 음 아직까지는 읽을만하다.🙄</p><p>아래 코드를 살펴 보자</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">getImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8B8c7i0OCqgXJiV7al7cTXiaAjDWEHharTg&amp;usqp=CAU"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">img</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resizeImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">img</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">applyFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">img</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">saveImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">img</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'Save Image'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드는 이미지를 불러오고, 사이즈를 조정하고, 필터를 씌우고, 이미지를 저장하고, 출력한다.</p><p>... 점점 복잡해 진다.🤯<br>
<!-- -->만약 여기서 더 기능을 추가하면 수 많은 <code>})</code>를 보게 되고, 코드의 가독성은 점점 줄어든다.
위 코드처럼 <em><del>콜백에 콜백에 콜백을 더해서 어머 깜짝이야</del></em> 하는 상황이 콜백 지옥이다.</p><p>엥? 콜백 지옥을 어떻게 벗어남?</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>콜백 지옥에서 벗어나는 방법:
<a href="http://callbackhell.com/" target="_blank" rel="noopener noreferrer">Callback hell</a> </p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="promise-">Promise (🤙)<a class="hash-link" href="#promise-" title="Direct link to heading">​</a></h3><p>위와 같이 <strong>Callback Hell</strong> 을 벗어나기 위해서 ES6에서 나온 문법이 <code>Promise</code>다.</p><blockquote><p>프로미스는 어느 시점에 비동기 작업의 최종 완료 혹은 실패에대한 결과값을 나타낸다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="프로미스-문법">프로미스 문법<a class="hash-link" href="#프로미스-문법" title="Direct link to heading">​</a></h4><p>프로미스 객체는 <code>callback</code>을 받는 생성자를 통해 사용가능하며 파라미터로는 <code>resolve</code> 와 <code>reject</code>를 사용한다.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><p>Promise<br>
<!-- -->[<!-- -->[PromiseState]<!-- -->]: 'pending'<br>
<!-- -->[<!-- -->[PromiseResult]<!-- -->]: undefiend</p></div></div><p>위를 콘솔창에 실행하면 <code>PromiseState</code>와 <code>PromiseResult</code> 값을 반환한다.</p><p><code>PromiseState</code>는 <code>pending</code>이고, <code>PromiseResult</code>는 <code>undefiend</code> 값을 갖고 있다.
<code>PromiseState</code>와 <code>PromiseResult</code>를 통해 무언가를 하지 않는다.
하지만 <code>Promise</code>가 어떤 상태를 값을 갖고 그 상태 값의 의미는 알아야 한다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="프로미스의-상태">프로미스의 상태<a class="hash-link" href="#프로미스의-상태" title="Direct link to heading">​</a></h4><p>프로미스의 상태는 <code>pending</code>, <code>fulfilled</code>, <code>rejected</code>를 갖고 있다.</p><ul><li>⏳<code>pending</code>: Promise는 해결(fulfilled) 혹은 실패(rejected)되지도 않고 대기중인 상태</li><li>✔<code>fullfilled</code>: Promise가 해결(resolve)된 상태</li><li>✖ <code>rejected</code>: 어떤 이유로 Promise가 실패(rejected)한 상태</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"성공"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"실패"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 코드를 실행해보면 아래와 같은 값을 볼 수 있다.</p><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><p>Promise<br>
<!-- -->[<!-- -->[PromiseState]<!-- -->]: "fulfilled"<br>
<!-- -->[<!-- -->[PromiseResult]<!-- -->]: "성공"</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="프로미스로-콜백지옥을-벗어나자">프로미스로 콜백지옥을 벗어나자.<a class="hash-link" href="#프로미스로-콜백지옥을-벗어나자" title="Direct link to heading">​</a></h4><ul><li>프로미스의 상태는 <code>pending</code>, <code>fullfilled</code>, <code>rejected</code>를 갖음</li><li><code>resolve</code>, <code>reject</code></li><li><code>then</code>, <code>cacth</code>, <code>finally</code></li><li>사실 callback queue 에는 두가지 task queue가 존재함 <ul><li>microtask queue<ul><li>promise, process.nextTick, queueMicrotask</li></ul></li><li>macrotask queue<ul><li>setTimeout, setInterval, setImmediate</li></ul></li><li>우선순위는 마이크로태스크 큐가 더 높음</li></ul></li><li>ES6에서 두두등장</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="프로미스의-우선순위">프로미스의 우선순위<a class="hash-link" href="#프로미스의-우선순위" title="Direct link to heading">​</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'first log'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"timeout log"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Promist log"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'final log'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위에 실행 결과는 어떻게 될까?</p><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">http://localhost:3000</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><p>first log<br>
<!-- -->final log<br>
<!-- -->Promist log<br>
<!-- -->timeout log  </p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="async--await">async / await<a class="hash-link" href="#async--await" title="Direct link to heading">​</a></h3><ul><li>ES7에 두두등장 ( Promise는 ES6에서 등장함)</li><li>사용법은 <code>async</code>는 function 앞페 <code>await</code>은 <code>promise</code>를 리턴받아야함!</li><li><code>async</code>는 프로미스를 리턴함</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="제너레이터">제너레이터<a class="hash-link" href="#제너레이터" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><p>Javascript에서 비동기에 관련해서 깊고 더 깊이 설명하기 위해서는 많은 공부가 필요하다. 사실 면접관님도 나에게 도움을 주고자 힌트를
많이 던져주셨지만 힌트를 방어 코드로 거부했다. 그 이유로는 내가 과정보다는 결과에만 급급해서 코딩을 하기 떄문인거 같다.</p><p>그리고 비동기 관련해서는 모든 내용을 완성하고 싶지만 <code>Promise</code>, <code>async/ await</code>, <code>제너레이터</code>는  사용해 보고,
대충 알지만 글로 정리하기 위해서는 스스로 아는 개념을 확인도 하고, 부족한 내용을 채우고, 아는 내용은 서로 연결하는 과정이 필요하다.
그래서 추후에 작성을 하려고 한다.</p><p>그건 그렇고 면접 때 받은 질문을 다시 각색해보자.</p><hr><p>Q. js에서 비동기 대해 설명해주세요</p><p>A. 네? 비동기요? 비동기가 어떻게 이루어지는 지를 말씀히시는건가요?</p><p>Q. 네 뭐든요.</p><p>A. 네. JS는 싱글 스레드를 특징으로 갖고 있습니다. 싱글 스레드는 한번에 하나의 처리 밖에 못하므로 JS에서 비동기를 이해하기 위해서는 먼저
JS 엔진(V8)과 브라우저의 WebAPI에 대해서 이해야합니다. JS엔진에는 메모리가 할당되는 <code>heap</code> 영역과 <code>Call Stack</code>이 존재하고 호출 된 함수는
<code>Call Stack</code>영역에서 처리합니다. 하지만 비동기 처리 <code>DOM EVENT</code>, <code>AJAX</code>, <code>Timer</code> 등 브라우저의 WebAPI에서 실행됩니다. WebAPI에서 실행이
끝난 후 브라우저의 <code>callback queue</code>에서 대기 하고, <code>Event Loop</code>는 <code>Call Stack</code>이 비어있으면 <code>callback queue</code>에서 대기중인 콜백 함수를
<code>Call Stack</code>에 푸쉬하고 JS 엔진은 콜백을 실행합니다.😎</p><p>Q. 콜백이나 콜백 지옥은 아시나요?(😒)</p><p>A. 네. 콜백 자체의 의미는 단순히 즉시 실행하는게 아닌 미래에 실행되는 의미로 아까 설명한대로 비동기 처리가 끝난 후, 실행되는 함수를 콜백이라고 할 수 있습니다.
그리고 콜백 지옥은 콜백에 콜백이 이루어져서 피라미드 구조를 갖게되어 해당 코드에 대해 직관성이 떨어지고, 유지 보수가 어렵게 되어 생산성을 떨어트립니다.
콜백 지옥을 회피하기 위한 방법으로 코드를 얕게 유지, 모듈화를 통한 방법이 있습니다. 또한, ES6에서는 <code>promise</code>를 사용해서 Chain 구조를 사용하여 회피 할 수 있습니다.😎</p><p>Q. 개발하시면서 콜백 지옥을 경험해본적은?</p><p>A. 제가 경험한 프로젝트에서 휴대폰으로 사진을 찍고, 해당 사진을 <code>Crop</code> 하여 갤러리에 저장하고, 그 저장한 이미지를 서버에 전송하는 프로세스가 있었습니다.
당시에는 <code>Promise</code>를 사용하여 처리를 했던 기억이 있습니다.😎</p><p>Q. 😲</p><hr><p>이라는 시나리오를 쓰면서 글을 마무리한다.</p><p>참조</p><blockquote><p><a href="http://callbackhell.com/" target="_blank" rel="noopener noreferrer">Callback Hell</a><br>
<a href="https://developer.mozilla.org/ko/docs/Learn/JavaScript/Asynchronous/Introducing#%EC%BD%9C%EB%B0%B1" target="_blank" rel="noopener noreferrer">Introducing asynchronous JavaScript</a><br>
<a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" target="_blank" rel="noopener noreferrer">What the heck is the event loop anyway?</a><br>
<a href="https://dev.to/lydiahallie/javascript-visualized-event-loop-3dif" target="_blank" rel="noopener noreferrer">javascript-visualized-event-loop-3dif</a>  </p></blockquote>]]></content>
        <author>
            <name>Fenrir</name>
            <uri>https://github.com/FenrirD</uri>
        </author>
        <category label="비동기" term="비동기"/>
        <category label="javascript" term="javascript"/>
        <category label="promise" term="promise"/>
        <category label="event loop" term="event loop"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[React Batch?]]></title>
        <id>react-batch</id>
        <link href="https://fenrirD.github.io/en/blog/react-batch"/>
        <updated>2022-11-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[도입]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="도입">도입<a class="hash-link" href="#도입" title="Direct link to heading">​</a></h2><hr><p>Q. React로 개발을 하셨는데 한 함수(Event Handler) 내에서 같은 상태를 2번 변경하면 어떻게 되나요? 그리고 랜더링은 몇번 이루어 지나요?</p><p>A. 음..? (왜 똑같은 상태를 2번 바꾸지? 의미가 있나?) 어.. 일단 마지막에 변경된 값으로 상태가 변합니다. 랜더링은 1번 이루어 질거라고 생각합니다.</p><p>Q. 왜요?  </p><p>A. 어... 그러니까.. 음 한번도 같은 상태를 연속으로 바꾼적이... 아마 지연?</p><p>Q. 아.. 네</p><hr><p>위 Q&amp;A는 내가 면접 때 질문을 듣고 대답한 내용이다.<br>
<!-- -->내가 FE 개발자로 React를 공부했다고 하면서 이런 질문에 다시는 얼버무리지 않기 위해 정리하고자 한다.</p><blockquote><p>State 업데이트는 <strong>비동기적</strong>일 수도 있습니다.<br>
<!-- -->React는 성능을 위해 여러 setState() 호출을 단일 업데이트로 한꺼번에 처리할 수 있습니다.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch">Batch?<a class="hash-link" href="#batch" title="Direct link to heading">​</a></h2><p>Batch란? React가 더 나은 성능을 위해 <em>여러 상태 업데이트를 단일 재랜더링으로 그룹화</em> 하는 경우이다.
쉽게 생각해서 다이소에서 물건 10개를 살 때, 모든 물건의 값을 지불하는게 아닌 물건 각각 계산을 해서 영수증을 10개를 받게 된다면 얼마나 비효율적인지 생각하면 쉽다.
그래서 React 도 상태가 변경 될 때마다 DOM을 다시 그리는게 아닌 변경된 상태를 한번에 DOM에 반영하는 것이다.</p><div class="playgroundContainer_X_Ta"><div class="playgroundHeader_dyrN">Live Editor</div><div class="playgroundEditor_Q6Y7" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace;color:#F8F8F2;background-color:#282A36"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">
function Counter() {
  const [count, setCount] = useState(0);
  const [renderCount, setRenderCount] = useState(0);
  
  useEffect(()=&gt;setRenderCount(c=&gt;c+1),[count])
  
  const click =() =&gt;{
    setCount(c=&gt;c+1);
    setCount(c=&gt;c+1);
    setCount(c=&gt;c+1);
  }
  
  return (
    &lt;div&gt;
      &lt;h2&gt;{count}&lt;/h2&gt;
      &lt;button onClick={click}&gt;Add&lt;/button&gt;
      &lt;h2&gt;render Counter: {renderCount}&lt;/h2&gt;
    &lt;/div&gt;
  );
}
</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">Counter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">renderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setRenderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">useEffect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setRenderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">click</span><span class="token plain"> </span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">click</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">Add</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">render Counter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">renderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div><div class="playgroundHeader_dyrN">Result</div><div class="playgroundPreview_DzOI"><div>Loading...</div></div></div><p><code>add</code> 버튼을 누르면 <code>count</code>는 3이 증가하고 <code>renderCount</code>는 1증가한다. 즉 상태는 3번의 변경이 있었지만 실제 DOM에 반영된 횟수는 1번이고 React는 상태를 일괄 적으로 처리한다는걸 알수 있다.
일괄 처리는 React의 <code>Transation</code> 객체를 통해 이루어 진다. 내가 이해한 바로는 상태변경은 컴포넌트의 모든 작업이 끝난 뒤에 발생을 하기 위해서 큐(queue)에 등록후 일괄 처리 한다는 것이다.    </p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Transation 객체에 대해서는 자세한 내용은 아래 글을 참조.<br>
<a href="https://d2.naver.com/helloworld/9297403#ch1-3" target="_blank" rel="noopener noreferrer">Naver D2- React의 작동 방법</a></p></div></div><p>그렇다고 모든 상태 변경에 대한 처리가 일괄처리 되는것은 아니다.  </p><div class="playgroundContainer_X_Ta"><div class="playgroundHeader_dyrN">Live Editor</div><div class="playgroundEditor_Q6Y7" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace;color:#F8F8F2;background-color:#282A36"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">
function Counter() {
  const [count, setCount] = useState(0);
  const [renderCount, setRenderCount] = useState(0);
  
  useEffect(()=&gt;setRenderCount(c=&gt;c+1),[count])
  
  const click = () =&gt; {
    setTimeout(()=&gt;{
      setCount(c=&gt;c+1)
      setCount(c=&gt;c+1);
      setCount(c=&gt;c+1);
    }, 0);
    
  }
  
  return (
    &lt;div&gt;
      &lt;h2&gt;{count}&lt;/h2&gt;
      &lt;button onClick={click}&gt;Add&lt;/button&gt;
      &lt;h2&gt;render Counter: {renderCount}&lt;/h2&gt;
    &lt;/div&gt;
  );
}
</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">Counter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">renderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setRenderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">useEffect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setRenderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">click</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">click</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">Add</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">render Counter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">renderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div><div class="playgroundHeader_dyrN">Result</div><div class="playgroundPreview_DzOI"><div>Loading...</div></div></div><p>위 코드를 실행하면 <code>renderCount</code>가 <code>setCount</code> 횟수만큼 증가한다.<br>
<!-- -->즉 Batch는 <code>Promise</code>, <code>setTimeout</code>, <code>native Event Handler</code> 등은 일괄 처리 되지 않는다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-batch">Automatic Batch<a class="hash-link" href="#automatic-batch" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>React 18 버전 부터는 <code>Automatic Batch</code> 을 지원한다.<br>
<a href="https://ko.reactjs.org/blog/2022/03/29/react-v18.html#new-feature-automatic-batching" target="_blank" rel="noopener noreferrer">공식 문서 - Automatizc Batch</a></p></div></div><p>이 글에 React 18버전의 Auto Batch가 어떻게 이루어지는지 코드 블럭을 통해 작성하고 싶지만 현재 Docusaurus의 버전이 17버전이므로 18버전으로 작성된 <a href="https://codesandbox.io/s/great-babycat-p98g6x" target="_blank" rel="noopener noreferrer">React18 -Automatic Batch 예제</a>
위 샌드박스에서 <code>add</code> 버튼을 누르면 17버전과 다르게 <code>renderCounter</code>가 1번만 증가 하는거를 알수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch-를-사용하지-않으려면">Batch 를 사용하지 않으려면?<a class="hash-link" href="#batch-를-사용하지-않으려면" title="Direct link to heading">​</a></h3><p>batch를 원하지 않을 때가 있다. 그런 경우가 뭐가 있을까? 음.. 생각이 안난다. 아무튼 예제 코드는 작성해본다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> flushSync </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'react-dom'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">Counter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">renderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> setRenderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">useState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">useEffect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setRenderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">click</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">flushSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">flushSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token arrow operator">=&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">c</span><span class="token arrow operator">=&gt;</span><span class="token plain">c</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">click</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">Add</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">button</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text">render Counter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">renderCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">h2</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://codesandbox.io/s/summer-sun-w1kqsp?file=/src/App.js" target="_blank" rel="noopener noreferrer">flushSync를 사용해서 Automatic Batch 비활성화</a></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><code>flushSync</code>는 react 18 부터</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><p>공부한 내용을 바탕으로 Q&amp;A를 다시 해본다면 아마 이렇게 답을 할거같다.</p><hr><p>Q. React로 개발을 하셨는데 한 함수(Event Handler)내에서 같은 상태를 2번 변경하면 어떻게 되나요? 그리고 랜더링은 몇번 이루어 지나요?</p><p>A. (자신감 있게) 네. 같은 상태를 2번 변경해도 React의 <code>Batch</code> 로 인해 상태 업데이트를 일괄 처리하기 때문에 상태는 2번 변경되지만 랜더링 자체는 1번만 됩니다.</p><p>Q. 일괄 처리 된다고요? 그러면 비동기요청은요?</p><p>A. 네. 비동기 요청의 경우에는 현재 사용하는 <em>React Version</em>에 따라서 달라집니다. 18버전 이전의 경우에는 비동기 요청의 콜백 함수에 상태 변경이 있는 횟수만큼 랜더링 됩니다. 하지만 18 버전에는 Automatic Batch가 추가 되면서
비동기 요청의 콜백에 상태 변화가 몇번이 발생해도 일괄 처리 대기 때문에 랜더링은 1회만 발생합니다. 또한 18버전에서 자동으로 일괄처리 되는것을 막기위해 <code>flushSync</code>를 사용합니다.</p><p>Q. 오호. 합격!</p><hr><p>이라는 시나리오를 쓰면서 글을 마무리한다.</p><p>참조</p><blockquote><p><a href="https://github.com/reactwg/react-18/discussions/21" target="_blank" rel="noopener noreferrer">React 18 Automatic Batch</a><br>
<a href="https://d2.naver.com/helloworld/9297403#ch2" target="_blank" rel="noopener noreferrer">Naver D2 기술 블로그</a></p></blockquote>]]></content>
        <author>
            <name>Fenrir</name>
            <uri>https://github.com/FenrirD</uri>
        </author>
        <category label="batch" term="batch"/>
        <category label="react" term="react"/>
        <category label="기술면접" term="기술면접"/>
    </entry>
</feed>